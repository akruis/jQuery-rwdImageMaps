(function(a){a.fn.rwdImageMaps=function(d){var e=this,h={debounce:false,timeout:300,triggerAlways:false},f=a.extend(h,typeof d==="object"?d:{}),g,b,i,c;if(typeof d==="string"){g=d}b=function(){e.each(function(){if(typeof(a(this).attr("usemap"))=="undefined"){return}var k=this,j=a(k);a("<img />").load(function(){var r="naturalWidth",n="naturalHeight",s="coords",l=j.attr(r),o=j.attr(n),p,q;if(!l||!o){var m=new Image();m.src=j.attr("src");if(!l){l=m.width}if(!o){o=m.height}}l=j.width()/l;o=j.height()/o;if(l<=0||o<=0){return}p=j.attr("usemap").substring(1);p=a('map[name="'+p+'"]');q=p.data("rwdImageMaps.scale");if(a.isArray(q)&&q[0]==l&&q[1]==o){if(f.triggerAlways){p.trigger("rwdImageMaps_invalid",[k],false);p.trigger("rwdImageMaps_changed",[k],false)}return}p.data("rwdImageMaps.scale",[l,o]);p.trigger("rwdImageMaps_invalid",[k],true);p.find("area").each(function(){var w=a(this);if(!w.data(s)){w.data(s,w.attr(s))}var v=w.data(s).split(","),u=new Array(v.length);for(var t=0;t<u.length;++t){if(t%2===0){u[t]=parseInt(v[t]*l)}else{u[t]=parseInt(v[t]*o)}}w.attr(s,u.toString())});p.trigger("rwdImageMaps_changed",[k],true)}).attr("src",j.attr("src"))})};i=function(){e.each(function(){var k,j;k=a(this);if(typeof(k.attr("usemap"))=="undefined"){return}var j=k.attr("usemap").substring(1);j=a('map[name="'+j+'"]');j.trigger("rwdImageMaps_invalid",[this])})};c=function(j,k){var l;return function(){i();clearTimeout(l);l=setTimeout(function(){j()},k)}};if(g==="off"){e.off("resize.rwdImageMaps")}else{if(f.debounce){a(window).on("resize.rwdImageMaps",c(b,f.timeout))}else{a(window).on("resize.rwdImageMaps",b)}}return this}})(jQuery);